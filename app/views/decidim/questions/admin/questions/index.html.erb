<%= stylesheet_link_tag "decidim/questions/admin/questions" %>
<div class="card">
  <div class="card-divider">
    <h2 class="card-title flex--sbc">
      <div>
        <%= t(".title") %>
        <span id="js-recategorize-questions-count" class="component-counter component-counter--inline" title="<%= t("decidim.questions.admin.questions.index.selected") %>"></span>
      </div>
      <%= render partial: "bulk-actions" %>
    </h2>
  </div>
  <div class="card-section">
    <ul class="menu align-center expanded card-tabs">
      <% @tabs.each do |tab| %>
        <li>
          <%= link_to t(".tabs.#{tab}"), questions_path(tab: tab), class: "#{'active' if @current_tab == tab}" %>
        </li>
      <% end %>
    </ul>
  </div>
  <div class="card-section">
    <div class="table-scroll">
      <table class="table-list">
        <thead>
          <tr>
            <th>
              <%= check_box_tag "questions_recategorize", "all", false, class: "js-check-all" %>
            </th>
            <th>
              <%= sort_link(query, :reference, t("models.question.fields.reference", scope: "decidim.questions") ) %>
            </th>
            <th>
              <%= sort_link(query, :question_type, t("models.question.fields.question_type", scope: "decidim.questions") ) %>
            </th>
            <th>
              <%= sort_link(query, :title, t("models.question.fields.title", scope: "decidim.questions") ) %>
            </th>
            <th>
              <%= sort_link(query, :category_name, t("models.question.fields.category", scope: "decidim.questions") ) %>
            </th>

            <th>
              <%= sort_link(query, :state, t("models.question.fields.state", scope: "decidim.questions") ) %>
            </th>

            <th>
              <%= sort_link(query, :created_at, t("models.question.fields.created_at", scope: "decidim.questions"), default_order: :desc ) %>
            </th>

            <th class="actions"><%= t("actions.title", scope: "decidim.questions") %></th>
          </tr>
        </thead>
        <tbody>
          <% questions.each do |question| %>
            <%= render partial: "question-tr", locals: {question: question} %>
          <% end %>
        </tbody>
      </table>
      <%= paginate questions, theme: "decidim" %>
    </div>
  </div>
</div>

<%= javascript_include_tag "decidim/questions/admin/questions" %>
